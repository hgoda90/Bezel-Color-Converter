<html>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<style>
		body{
			font-family: monospace;
			font-size: 16px;
			margin: 16px;
			width: 410px;
			height: 410px;
		}
		
		.hex, .contrast{
			display: inline-block;
			margin-top: 14px;
		}
		
		.hex input{
			text-transform:uppercase;
		}
		
		.square{
			border: 2px solid #000;
			background: #808080;
			height: 72px;
			width: 84px;
			float: right;
			margin-top: -40px;
		}
		
		.error {
			color: #FF0000;
			display: inline-block;
			margin-top: 4px;
		}
		
		#submit{
			margin-top: 24px;
			width: 20%;
		}
		
		#submit:hover{
			cursor: pointer;
		}
	</style>
	<body>
		<h2 id="title">HEX to koko-aio Color Converter</h2>
		 <form name="color-convert" method="post" onsubmit="return false;" autocomplete="off">
			BEZEL_R = "<span id="bezel-r">0.000000</span>"<br>
			BEZEL_G = "<span id="bezel-g">0.000000</span>"<br>
			BEZEL_B = "<span id="bezel-b">0.000000</span>"<br>
			BEZEL_CON = "<span id="contrast">1.300000</span>"<br><br>
			<div class="hex">HEX: # <input type="text" name="hex" placeholder="808080"></div>
			<div class="contrast">Contrast: <input type="text" name="contrast" placeholder="1.30"></div>
			<div class="square"></div>
			<br>
			<br>
			<input type="submit" name="submit" value="Convert" id="submit">
		</form>
	</body>
	<script>
		$(document).ready(function () {
			$("form").submit(function (event) {
				var hex = $(".hex input").val();
					contrast = $(".contrast input").val();
					
				if($(".contrast input").val() == ""){
					contrast = "1.30";
				}
				else{
					contrast = $(".contrast input").val();
				}
				
				function hexToRgb(color) {
					var rgb = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);
					return rgb ? {
						r: parseInt(rgb[1], 16),
						g: parseInt(rgb[2], 16),
						b: parseInt(rgb[3], 16)
					} : null;
				}
				
					$('#bezel-r').text(((hexToRgb(hex).r - 128) * ((0.395 - (contrast - 1.30) *  (((3.75 - contrast) * .125) + .00125)) / 128)).toFixed(9));
					$('#bezel-g').text(((hexToRgb(hex).g - 128) * ((0.395 - (contrast - 1.30) *  (((3.75 - contrast) * .125) + .00125)) / 128)).toFixed(9));
					$('#bezel-b').text(((hexToRgb(hex).b - 128) * ((0.395 - (contrast - 1.30) *  (((3.75 - contrast) * .125) + .00125)) / 128)).toFixed(9));
					
					$(".square").css("background", "#"+hex);
					$("#contrast").text(contrast+"0000");

				event.preventDefault();
				
				});
		});
	</script>
</html>
